import{p as e,w as U,a as o,v as k}from"./chunk-UH6JLGW7-DB7KfY1H.js";import{b as A,c as u}from"./api-Cr5uWYEN.js";import{c as l,B as p}from"./button-DQc83rjE.js";import{D,a as T,c as B,b as E,d as H}from"./dialog-B_vhg04E.js";import{I as b}from"./input-FauOGYKd.js";import{S as I,a as z,b as R,c as $,d as j}from"./select-xCTCY9o9.js";import{H as F}from"./Header-DGBBqV3K.js";import"./Combination-Dov-rLQ-.js";import"./createLucideIcon-DlhUvwdl.js";import"./index-BZlCCt0w.js";import"./index-C5gdAslh.js";import"./chevron-up-BUQweAlY.js";function L({className:a,...t}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:l("w-full caption-bottom text-sm",a),...t})})}function O({className:a,...t}){return e.jsx("thead",{"data-slot":"table-header",className:l("[&_tr]:border-b",a),...t})}function P({className:a,...t}){return e.jsx("tbody",{"data-slot":"table-body",className:l("[&_tr:last-child]:border-0",a),...t})}function g({className:a,...t}){return e.jsx("tr",{"data-slot":"table-row",className:l("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...t})}function c({className:a,...t}){return e.jsx("th",{"data-slot":"table-head",className:l("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}function d({className:a,...t}){return e.jsx("td",{"data-slot":"table-cell",className:l("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...t})}const V=()=>{const[a,t]=o.useState([]),[w,v]=o.useState(!0),[y,h]=o.useState(!1),[r,n]=o.useState({username:"",password:"",role:"waiter",firstName:"",lastName:""});let i=null;typeof window<"u"&&(i=localStorage.getItem("token"));const m=A.defaults.baseURL,f=async()=>{try{const s=await u.get(m+"/auth/all",{headers:{Authorization:`Bearer ${i}`}});t(s.data.users||[])}catch(s){console.error("Error fetching users",s)}finally{v(!1)}};o.useEffect(()=>{f()},[]);const N=async s=>{try{await u.post(m+`/auth/${s}/delete`,{},{headers:{Authorization:`Bearer ${i}`}}),t(a.filter(x=>x.id!==s))}catch(x){console.error("Failed to delete user",x)}},S=async()=>{try{await u.post(m+"/auth/register",r,{headers:{Authorization:`Bearer ${i}`}}),h(!1),n({username:"",password:"",role:"waiter",firstName:"",lastName:""}),f()}catch(s){console.error("Error adding user",s)}},C=k();return e.jsxs("div",{className:"min-h-screen flex bg-gray-100",children:[e.jsx(F,{navigate:C}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Management"}),e.jsx(p,{onClick:()=>h(!0),children:"Add User"})]}),w?e.jsx("p",{children:"Loading users..."}):e.jsxs(L,{children:[e.jsx(O,{children:e.jsxs(g,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{children:"Username"}),e.jsx(c,{children:"Role"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(P,{children:a.map(s=>e.jsxs(g,{children:[e.jsx(d,{children:s.id}),e.jsx(d,{children:s.username}),e.jsx(d,{children:s.role}),e.jsx(d,{children:e.jsx(p,{variant:"destructive",size:"sm",onClick:()=>N(s.id),children:"Delete"})})]},s.id))})]}),e.jsx(D,{open:y,onOpenChange:h,children:e.jsxs(T,{children:[e.jsx(B,{children:e.jsx(E,{children:"Add User"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{placeholder:"Username",value:r.username,onChange:s=>n({...r,username:s.target.value})}),e.jsx(b,{type:"password",placeholder:"Password",value:r.password,onChange:s=>n({...r,password:s.target.value})}),e.jsxs(I,{value:r.role,onValueChange:s=>n({...r,role:s}),children:[e.jsx(z,{children:e.jsx(R,{placeholder:"Select role"})}),e.jsxs($,{children:[e.jsx(j,{value:"waiter",children:"Waiter"}),e.jsx(j,{value:"chef",children:"Chef"}),e.jsx(j,{value:"admin",children:"Admin"})]})]})]}),e.jsx(H,{children:e.jsx(p,{onClick:S,children:"Save"})})]})})]})]})},se=U(V);export{se as default};
